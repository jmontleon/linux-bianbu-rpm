From 36d523089cb07ac71419d8d0cfa098e5a7f8a434 Mon Sep 17 00:00:00 2001
From: liweizhi <weizhi.li@spacemit.com>
Date: Wed, 31 Jul 2024 12:38:29 +0800
Subject: [PATCH 0978/1448] scripts/package/mkdebian

add Commit-Id to control field

Change-Id: I5f3a80d6698c1e50f7fb6871cc6f71e1f5a9f5d9
---
 scripts/package/mkdebian | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/scripts/package/mkdebian b/scripts/package/mkdebian
index 085270775ea6..414ebaede4ba 100755
--- a/scripts/package/mkdebian
+++ b/scripts/package/mkdebian
@@ -154,6 +154,8 @@ else
 fi
 sourcename=${KDEB_SOURCENAME:-linux-upstream}
 
+kernelgitver=$(git rev-parse --short HEAD)
+
 if [ "$ARCH" = "um" ] ; then
 	packagename=user-mode-linux
 else
@@ -217,6 +219,7 @@ Maintainer: $maintainer
 Rules-Requires-Root: no
 Build-Depends: bc, debhelper, rsync, kmod, cpio, bison, flex $extra_build_depends
 Homepage: https://www.kernel.org/
+XBS-Commit-Id: $kernelgitver
 
 Package: $packagename-$version
 Architecture: $debarch
-- 
2.47.0

