From 28bf346c9e998285f52eceab2c5386bf37ec3104 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=E2=80=9Cweijinmei=E2=80=9D?= <jinmei.wei@spacemit.com>
Date: Tue, 7 Nov 2023 17:23:28 +0800
Subject: [PATCH 0144/1448] reset: modify reset driver file name of k1pro

Change-Id: I3398cd8c744fdb1c37a2f19651ba90d89a51979a
---
 arch/riscv/boot/dts/spacemit/k1-pro.dtsi                  | 2 +-
 arch/riscv/configs/k1-pro_fpga_defconfig                  | 1 +
 drivers/reset/Kconfig                                     | 8 ++++----
 drivers/reset/Makefile                                    | 2 +-
 drivers/reset/{k1-pro-reset.c => reset-spacemit-k1pro.c}  | 2 +-
 .../reset/{k1-pro-reset.h => spacemit-k1pro-reset.h}      | 0
 6 files changed, 8 insertions(+), 7 deletions(-)
 rename drivers/reset/{k1-pro-reset.c => reset-spacemit-k1pro.c} (99%)
 rename include/dt-bindings/reset/{k1-pro-reset.h => spacemit-k1pro-reset.h} (100%)

diff --git a/arch/riscv/boot/dts/spacemit/k1-pro.dtsi b/arch/riscv/boot/dts/spacemit/k1-pro.dtsi
index 30538df03356..4c9e7fbcc690 100644
--- a/arch/riscv/boot/dts/spacemit/k1-pro.dtsi
+++ b/arch/riscv/boot/dts/spacemit/k1-pro.dtsi
@@ -6,7 +6,7 @@
 /dts-v1/;
 
 #include <dt-bindings/clock/k1-pro-ccu-clock.h>
-#include <dt-bindings/reset/k1-pro-reset.h>
+#include <dt-bindings/reset/spacemit-k1pro-reset.h>
 #include <dt-bindings/pinctrl/k1-pro-pinctrl.h>
 
 / {
diff --git a/arch/riscv/configs/k1-pro_fpga_defconfig b/arch/riscv/configs/k1-pro_fpga_defconfig
index 2c0448b19c36..4f9691cd94fe 100644
--- a/arch/riscv/configs/k1-pro_fpga_defconfig
+++ b/arch/riscv/configs/k1-pro_fpga_defconfig
@@ -234,6 +234,7 @@ CONFIG_SPACEMIT_REMOTEPROC=y
 CONFIG_PWM=y
 CONFIG_PWM_DWC_K1PRO=y
 # CONFIG_RESET_SCMI is not set
+CONFIG_RESET_K1PRO_SPACEMIT=y
 # CONFIG_NVMEM is not set
 CONFIG_EXT4_FS=y
 CONFIG_EXT4_FS_POSIX_ACL=y
diff --git a/drivers/reset/Kconfig b/drivers/reset/Kconfig
index e679784802fe..afce205be857 100644
--- a/drivers/reset/Kconfig
+++ b/drivers/reset/Kconfig
@@ -318,11 +318,11 @@ config RESET_ZYNQ
 	help
 	  This enables the reset controller driver for Xilinx Zynq SoCs.
 
-config RESET_K1_PRO_SPACEMIT
-	tristate "Reset controller driver for Spacemit SoCs"
-	default y
+config RESET_K1PRO_SPACEMIT
+	tristate "Reset controller driver for Spacemit K1PRO SoCs"
+	depends on SOC_SPACEMIT_K1PRO
 	help
-	  Support for reset controllers on Spacemit SoCs.
+	  Support for reset controllers on Spacemit K1PRO SoCs.
 
 config RESET_K1X_SPACEMIT
         tristate "Reset controller driver for Spacemit K1X SoCs"
diff --git a/drivers/reset/Makefile b/drivers/reset/Makefile
index c474ddfc67ae..8fc8ce29ef59 100644
--- a/drivers/reset/Makefile
+++ b/drivers/reset/Makefile
@@ -41,5 +41,5 @@ obj-$(CONFIG_RESET_UNIPHIER) += reset-uniphier.o
 obj-$(CONFIG_RESET_UNIPHIER_GLUE) += reset-uniphier-glue.o
 obj-$(CONFIG_RESET_ZYNQ) += reset-zynq.o
 obj-$(CONFIG_ARCH_ZYNQMP) += reset-zynqmp.o
-obj-$(CONFIG_RESET_K1_PRO_SPACEMIT) += k1-pro-reset.o
+obj-$(CONFIG_RESET_K1PRO_SPACEMIT) += reset-spacemit-k1pro.o
 obj-$(CONFIG_RESET_K1X_SPACEMIT) += reset-spacemit-k1x.o
diff --git a/drivers/reset/k1-pro-reset.c b/drivers/reset/reset-spacemit-k1pro.c
similarity index 99%
rename from drivers/reset/k1-pro-reset.c
rename to drivers/reset/reset-spacemit-k1pro.c
index 026717812959..71f10dc75420 100755
--- a/drivers/reset/k1-pro-reset.c
+++ b/drivers/reset/reset-spacemit-k1pro.c
@@ -11,7 +11,7 @@
 #include <linux/platform_device.h>
 #include <linux/reset-controller.h>
 #include <linux/io.h>
-#include <dt-bindings/reset/k1-pro-reset.h>
+#include <dt-bindings/reset/spacemit-k1pro-reset.h>
 #include <linux/clk-provider.h>
 #include <linux/atomic.h>
 #include <linux/spinlock.h>
diff --git a/include/dt-bindings/reset/k1-pro-reset.h b/include/dt-bindings/reset/spacemit-k1pro-reset.h
similarity index 100%
rename from include/dt-bindings/reset/k1-pro-reset.h
rename to include/dt-bindings/reset/spacemit-k1pro-reset.h
-- 
2.47.0

