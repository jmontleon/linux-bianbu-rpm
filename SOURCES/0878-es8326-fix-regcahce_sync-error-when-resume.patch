From d65e7e85e9e9042723f15e71c68fd388454c2acf Mon Sep 17 00:00:00 2001
From: weijinmei <jinmei.wei@space-t.cn>
Date: Thu, 27 Jun 2024 19:01:49 +0800
Subject: [PATCH 0878/1448] es8326: fix regcahce_sync error when resume

log: es8326 2-0019: Unable to sync registers 0x0-0x3. -6

Change-Id: I9fd3fe139d4b4ea60c5a34f6a0ad9fa604c5e5dd
---
 sound/soc/codecs/es8326.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/sound/soc/codecs/es8326.c b/sound/soc/codecs/es8326.c
index ddc96159f3e9..a29939c46355 100644
--- a/sound/soc/codecs/es8326.c
+++ b/sound/soc/codecs/es8326.c
@@ -264,6 +264,10 @@ static bool es8326_volatile_register(struct device *dev, unsigned int reg)
 static const struct regmap_config es8326_regmap_config = {
 	.reg_bits = 8,
 	.val_bits = 8,
+#ifdef SPACEMIT_CONFIG_CODEC_ES8326
+	.use_single_read = true,
+	.use_single_write = true,
+#endif
 	.max_register = 0xff,
 	.volatile_reg = es8326_volatile_register,
 	.cache_type = REGCACHE_RBTREE,
-- 
2.47.0

