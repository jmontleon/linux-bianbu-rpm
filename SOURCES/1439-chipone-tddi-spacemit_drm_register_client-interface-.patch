From 35675bcf9276d8e9123fda6ecb0fc5eb82907563 Mon Sep 17 00:00:00 2001
From: zhangmeng <zhangmeng.kevin@spacemit.com>
Date: Thu, 9 Jan 2025 14:18:29 +0800
Subject: [PATCH 1439/1451] chipone-tddi: spacemit_drm_register_client
 interface depend on DRM_SPACEMIT

Change-Id: Ib8b861e8a9b37ddca4a03995e0873976f28b7f92
---
 drivers/input/touchscreen/chipone-tddi/cts_driver.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/input/touchscreen/chipone-tddi/cts_driver.c b/drivers/input/touchscreen/chipone-tddi/cts_driver.c
index 6905ffb55c37..1c1e16e31f61 100644
--- a/drivers/input/touchscreen/chipone-tddi/cts_driver.c
+++ b/drivers/input/touchscreen/chipone-tddi/cts_driver.c
@@ -290,8 +290,8 @@ static int spacemit_cts_hw_init(struct chipone_ts_data *cts_data)
     return ret;
 }
 
-static int callback_times = 0;
-static int fb_notifier_callback(struct notifier_block *nb,
+__maybe_unused static int callback_times = 0;
+__maybe_unused static int fb_notifier_callback(struct notifier_block *nb,
 	unsigned long action, void *data)
 {
     const struct cts_platform_data *pdata =
@@ -697,9 +697,11 @@ static int cts_driver_probe(struct spi_device *client)
         goto err_destroy_heart_workqueue;
     }
 
+#ifdef CONFIG_DRM_SPACEMIT
     cts_data->pdata->fb_notifier.notifier_call = fb_notifier_callback;
     spacemit_drm_register_client(&cts_data->pdata->fb_notifier);
-    
+#endif
+
     return 0;
 
 err_destroy_heart_workqueue:
-- 
2.47.0

