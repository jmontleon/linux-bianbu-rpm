From e5f4abb603f793a19222107c6d688c549ce670b2 Mon Sep 17 00:00:00 2001
From: wanlong <long.wan@spacemit.com>
Date: Mon, 6 Jan 2025 14:32:47 +0800
Subject: [PATCH 1426/1451] usb: typec: husb239: fix bug of voltage compare,
 req_voltage's unit is mV

Change-Id: I63aca3d038542942304f83f4b4be2f0c5c0c2550
---
 drivers/usb/typec/husb239.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/usb/typec/husb239.c b/drivers/usb/typec/husb239.c
index 5f4aaf9e4055..2d0efaceb9a7 100644
--- a/drivers/usb/typec/husb239.c
+++ b/drivers/usb/typec/husb239.c
@@ -487,7 +487,7 @@ static int husb239_usbpd_request_voltage(struct husb239 *husb239)
 	if (!husb239->psy_online || !info->pd_supported)
 		return -EINVAL;
 
-	if (husb239->voltage == husb239->req_voltage)
+	if (husb239->voltage == husb239->req_voltage * 1000)
 		return 0;
 
 	switch (husb239->req_voltage) {
-- 
2.47.0

