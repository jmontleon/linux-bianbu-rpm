From c5af6047406cd7276cc69748a358a489c367d6db Mon Sep 17 00:00:00 2001
From: zhangmeng <zhangmeng.kevin@spacemit.com>
Date: Wed, 25 Dec 2024 20:54:38 +0800
Subject: [PATCH 1400/1448] wireless: bcmdhd: fix compile warning

Change-Id: I4b8a548022e3613312395dd4b83cd2d579184b5d
---
 drivers/net/wireless/bcmdhd/dhd_gpio.c       | 2 ++
 drivers/net/wireless/bcmdhd/wl_android_ext.c | 4 ++--
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/net/wireless/bcmdhd/dhd_gpio.c b/drivers/net/wireless/bcmdhd/dhd_gpio.c
index 2638a8e1b624..8bdb1cf1c909 100644
--- a/drivers/net/wireless/bcmdhd/dhd_gpio.c
+++ b/drivers/net/wireless/bcmdhd/dhd_gpio.c
@@ -276,6 +276,8 @@ dhd_wlan_init_gpio(wifi_adapter_info_t *adapter)
 	int gpio_wl_host_wake = -1;
 	int host_oob_irq = -1;
 	uint host_oob_irq_flags = 0;
+#endif
+#ifdef CUSTOMER_HW_ALLWINNER
 	int wakeup_enable = 0;
 #endif
 
diff --git a/drivers/net/wireless/bcmdhd/wl_android_ext.c b/drivers/net/wireless/bcmdhd/wl_android_ext.c
index 19e03e459676..c0258fc2a111 100644
--- a/drivers/net/wireless/bcmdhd/wl_android_ext.c
+++ b/drivers/net/wireless/bcmdhd/wl_android_ext.c
@@ -2626,8 +2626,8 @@ wl_ext_get_country(struct net_device *dev, char *data, char *command,
 		char *country_code = data;
 		char *rev_info_delim = country_code + 2; /* 2 bytes of country code */
 		int revinfo = 0;
-		if ((rev_info_delim) &&
-			(strnicmp(rev_info_delim, "/", strlen("/")) == 0) && (rev_info_delim + 1)) {
+		if ((*rev_info_delim) &&
+			(strnicmp(rev_info_delim, "/", strlen("/")) == 0) && *(rev_info_delim + 1)) {
 			revinfo  = bcm_atoi(rev_info_delim + 1);
 		}
 #ifdef WL_CFG80211
-- 
2.47.0

